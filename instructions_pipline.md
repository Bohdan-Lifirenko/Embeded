**Instruction pipeline** ‚Äî —Ü–µ –º–µ—Ö–∞–Ω—ñ–∑–º —É –ø—Ä–æ—Ü–µ—Å–æ—Ä—ñ, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î **–≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —á–∞—Å—Ç–∏–Ω —Ä—ñ–∑–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –æ–¥–Ω–æ—á–∞—Å–Ω–æ**, —â–æ–± –∑–±—ñ–ª—å—à–∏—Ç–∏ —à–≤–∏–¥–∫—ñ—Å—Ç—å —Ä–æ–±–æ—Ç–∏.

–ü—Ä–æ—Å—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏:
üëâ –ø—Ä–æ—Ü–µ—Å–æ—Ä **–∫–æ–Ω–≤–µ—î—Ä–∏–∑—É—î** –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥, —è–∫ –Ω–∞ —Ñ–∞–±—Ä–∏—Ü—ñ.

---

# üè≠ –ê–Ω–∞–ª–æ–≥—ñ—è ‚Äú–∫–æ–Ω–≤–µ—î—Ä–∞‚Äù

–£—è–≤–∏, —â–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è ‚Äî —Ü–µ –¥–µ—Ç–∞–ª—å, —è–∫—É —Ç—Ä–µ–±–∞ –∑—Ä–æ–±–∏—Ç–∏ –≤ 3 –µ—Ç–∞–ø–∏:

1. **Fetch** ‚Äî –¥—ñ—Å—Ç–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –∑ –ø–∞–º‚Äô—è—Ç—ñ
2. **Decode** ‚Äî –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —â–æ —Ä–æ–±–∏—Ç–∏
3. **Execute** ‚Äî –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥—ñ—é

–ë–µ–∑ pipeline:

```
[Fetch] ‚Üí [Decode] ‚Üí [Execute]
(—Ç—ñ–ª—å–∫–∏ –æ–¥–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑–∞ —Ä–∞–∑)
```

–ó pipeline:

```
–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è 1: [Fetch] [Decode] [Execute]
–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è 2:        [Fetch] [Decode] [Execute]
–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è 3:               [Fetch] [Decode] [Execute]
```

–¢—Ä–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å –æ–¥–Ω–æ—á–∞—Å–Ω–æ, –∞–ª–µ –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –µ—Ç–∞–ø–∞—Ö.

---

# üìå –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î —É ARM Cortex-M

Cortex-M –ø—Ä–æ—Ü–µ—Å–æ—Ä–∏ (M0/M3/M4/M7) –º–∞—é—Ç—å 3-—Å—Ç—É–ø–µ–Ω–µ–≤–∏–π pipeline:

1. **Fetch** ‚Äî –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ Flash
2. **Decode** ‚Äî –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è
3. **Execute** ‚Äî –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

–¢–æ–º—É –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó **PC –∑–∞–≤–∂–¥–∏ –≤–∫–∞–∑—É—î –Ω–∞ –∞–¥—Ä–µ—Å—É +4 –±–∞–π—Ç–∏**, –∞ –Ω–µ –Ω–∞ —Å–∞–º—É —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é.
–¶–µ —Ç–µ, —â–æ —Ç–∏ –≤–∂–µ –±–∞—á–∏–≤ —É –¥–∏–∑–∞—Å–µ–º–±–ª–µ—Ä—ñ.

---

# üìå –ß–æ–º—É —Ü–µ –∫–æ—Ä–∏—Å–Ω–æ?

* –∑–±—ñ–ª—å—à—É—î —à–≤–∏–¥–∫—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –±–µ–∑ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —á–∞—Å—Ç–æ—Ç–∏
* –∑–º–µ–Ω—à—É—î –∑–∞—Ç—Ä–∏–º–∫–∏ –º—ñ–∂ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏
* –¥–æ–∑–≤–æ–ª—è—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –æ–¥–Ω—É —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –∫–æ–∂–µ–Ω —Ç–∞–∫—Ç (–ø—ñ—Å–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è pipeline)

---

# ‚ö†Ô∏è –ö–æ–ª–∏ pipeline "–ª–∞–º–∞—î—Ç—å—Å—è"?

Pipeline —Ç—Ä–µ–±–∞ –æ—á–∏—Å—Ç–∏—Ç–∏ (flush), –∫–æ–ª–∏:

* –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è **B / BL / BX / –ø–µ—Ä–µ—Ö–æ–¥–∏**
* –∑–º—ñ–Ω—é—î—Ç—å—Å—è –∞–¥—Ä–µ—Å–∞ PC
* –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è
* –∑–º—ñ–Ω—é—î—Ç—å—Å—è —Ä–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏

–¶–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **pipeline stall** –∞–±–æ **pipeline flush**.

–¢–æ–º—É –ø–µ—Ä–µ—Ö–æ–¥–∏ (branch) —Ç—Ä–æ—Ö–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à—ñ ‚Äî 2-3 —Ç–∞–∫—Ç–∏.

---

# üéØ –ü—ñ–¥—Å—É–º–æ–∫

**Instruction pipeline** ‚Äî —Ü–µ ‚Äú–∫–æ–Ω–≤–µ—î—Ä‚Äù —É –ø—Ä–æ—Ü–µ—Å–æ—Ä—ñ, –¥–µ –æ–¥–Ω–æ—á–∞—Å–Ω–æ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è —Ä—ñ–∑–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π.

–¶–µ –¥–æ–∑–≤–æ–ª—è—î:

* –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó *—à–≤–∏–¥—à–µ*
* –∑–º–µ–Ω—à—É–≤–∞—Ç–∏ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è
* –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ

---

–Ø–∫—â–æ —Ö–æ—á–µ—à, –º–æ–∂—É –Ω–∞–º–∞–ª—é–≤–∞—Ç–∏ —Å—Ö–µ–º—É pipeline –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π Cortex-M.
